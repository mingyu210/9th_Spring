# ðŸ€ UMC Mission Database ì„¤ê³„ & êµ¬í˜„ ê¸°ë¡

## ðŸ“Œ 0ì£¼ì°¨ Mission

### 1. ERD ì´ˆì•ˆ ì„¤ê³„
- **íšŒì›(User)** ê³¼ **ì„ í˜¸í•˜ëŠ” ìŒì‹(Food)** ê´€ê³„ë¥¼ ë‹¨ìˆœí•˜ê²Œ ì„¤ê³„.
- í•˜ì§€ë§Œ í•œ ëª…ì˜ íšŒì›ì´ ì—¬ëŸ¬ ìŒì‹ì„ ì„ í˜¸í•  ìˆ˜ ìžˆê³ , ë™ì‹œì— í•˜ë‚˜ì˜ ìŒì‹ì´ ì—¬ëŸ¬ íšŒì›ì—ê²Œ ì„ í˜¸ë  ìˆ˜ ìžˆë‹¤ëŠ” ì ì„ ê°„ê³¼.
- ì¦‰, íšŒì›ê³¼ ìŒì‹ì€ **ë‹¤ëŒ€ë‹¤(N:M) ê´€ê³„**ìž„ì„ ê¹¨ë‹¬ìŒ.

### 2. ê°œì„ ëœ ì„¤ê³„
- ë‹¤ëŒ€ë‹¤ ê´€ê³„ë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ **ì—°ê²° í…Œì´ë¸”(ì„ í˜¸ìŒì‹)** ì¶”ê°€.
- ì •ê·œí™”ë¥¼ í†µí•´ ë°ì´í„° ë¬´ê²°ì„±ì„ ë³´ìž¥.
- ê° í…Œì´ë¸”ì— ë§žëŠ” ë°ì´í„° íƒ€ìž… ì§€ì •.


## ðŸ“Œ 1ì£¼ì°¨ Mission

### 1. ê°œì„  ì‚¬í•­
- ë¯¸ì…˜ ì§„í–‰ ì¤‘ **ì§€ì—­ ì •ë³´(Location)** ë¥¼ ë³„ë„ì˜ í…Œì´ë¸”ë¡œ ë¶„ë¦¬í•´ì•¼ í•œë‹¤ëŠ” í•„ìš”ì„±ì„ ê¹¨ë‹¬ìŒ.
- íšŒì›ê³¼ ê°€ê²Œ ëª¨ë‘ ì§€ì—­ê³¼ ì—°ê´€ ê´€ê³„ë¥¼ ê°€ì§.
- ìŒì‹ ì¹´í…Œê³ ë¦¬ì™€ ê°€ê²Œ ì—°ê´€ ê´€ê³„ë¥¼ ê°€ì§.
- ë¬¸ì˜ì™€ ë¦¬ë·°ì˜ ì‚¬ì§„ ì†ì„±ì´ ë‹¤ì¤‘ ê°’ì„ ê°€ì§ˆ ìˆ˜ ìžˆì–´ ë³„ë„ì˜ í…Œì´ë¸”ë¡œ ë¶„ë¦¬í•¨.
- ë¦¬ë·° ë‹µê¸€ê³¼ ë¬¸ì˜ ë‹µê¸€ í…Œì´ë¸”ì„ ìƒˆë¡œ ìƒì„±í•¨
- ì˜ì—…ì‹œê°„ ì •ë³´ë¥¼ ê´€ë¦¬í•˜ê¸° ìœ„í•´ ì˜ì—…ì‹œê°„ í…Œì´ë¸”ì„ ì¶”ê°€í•¨
- ì´ì— ë”°ë¼ ERDë¥¼ ìˆ˜ì •í•¨.

![img_2.png](img_2.png)

---

## ðŸ“Œ SQL ì¿¼ë¦¬ ì •ë¦¬

### 1. ë¦¬ë·° ì¡°íšŒ
```sql
SELECT ë¦¬ë·°.grade,
       ë¦¬ë·°.content,
       ë¦¬ë·°.photo,
       íšŒì›.name
FROM ë¦¬ë·° 
JOIN ê°€ê²Œ  ON ê°€ê²Œ.id = ë¦¬ë·°.shop_id
JOIN íšŒì›  ON íšŒì›.id = ë¦¬ë·°.user_id
WHERE ê°€ê²Œ.name = 'ì í¬ê´€ë¦¬';
```

### 2. ë¦¬ë·° ë“±ë¡
```sql
INSERT INTO ë¦¬ë·° (shop_id, user_id, grade, content, photo)
SELECT ê°€ê²Œ.id,
       íšŒì›.id,
       5,
       'ì„œë¹„ìŠ¤ê°€ í›Œë¥­í•©ë‹ˆë‹¤',
       'ì‚¬ì§„'
FROM ê°€ê²Œ, íšŒì›
WHERE ê°€ê²Œ.name = 'ì í¬ê´€ë¦¬'
  AND íšŒì›.id = 'ë¡œê·¸ì¸í•œ_ì‚¬ìš©ìž_id';
```

### 3. ì‚¬ìš©ìž ì •ë³´ ì¡°íšŒ
```sql
SELECT name,
       email,
       phone,
       point
FROM íšŒì›
WHERE id = 'ë¡œê·¸ì¸í•œ_ì‚¬ìš©ìž_id';

```

### 4. ë¯¸ì…˜ ì¡°íšŒ(offset ê¸°ë°˜)
```sql
SELECT ë¯¸ì…˜.point,
       ë¯¸ì…˜ìˆ˜í–‰.status,
       ê°€ê²Œ.name,
       ê°€ê²Œ.id,
       ë¯¸ì…˜.content,
       DATEDIFF(ë¯¸ì…˜.date, NOW()) AS days_left
FROM ë¯¸ì…˜ìˆ˜í–‰
         JOIN ë¯¸ì…˜ ON ë¯¸ì…˜ìˆ˜í–‰.mission_id = ë¯¸ì…˜.id
         JOIN ê°€ê²Œ ON ë¯¸ì…˜.shop_id = ê°€ê²Œ.id
WHERE ë¯¸ì…˜ìˆ˜í–‰.user_id = 'ë¡œê·¸ì¸í•œ_ì‚¬ìš©ìž_id'
ORDER BY days_left ASC
    LIMIT 10 OFFSET 100;

```

### 5-1. í™ˆ í™”ë©´(íŽ˜ì´ì§• ì²˜ë¦¬ ì „)
```sql
SELECT ê°€ê²Œ.name,
       ë¯¸ì…˜.content,
       ë¯¸ì…˜.point,
       ë¯¸ì…˜.id
FROM ë¯¸ì…˜
         JOIN ê°€ê²Œ   ON ë¯¸ì…˜.shop_id = ê°€ê²Œ.id
         JOIN ì§€ì—­   ON ê°€ê²Œ.location_id = ì§€ì—­.id
         JOIN íšŒì›   ON ì§€ì—­.id = íšŒì›.location_id
WHERE íšŒì›.id = 'ë¡œê·¸ì¸í•œ_ì‚¬ìš©ìž_id'
ORDER BY ë¯¸ì…˜.id ASC
    LIMIT 10;

```

### 5-2. (ì»¤ì„œ ê¸°ë°˜ íŽ˜ì´ì§•)
```sql
SELECT ê°€ê²Œ.name,
       ë¯¸ì…˜.content,
       ë¯¸ì…˜.point,
       ë¯¸ì…˜.id
FROM ë¯¸ì…˜
         JOIN ê°€ê²Œ   ON ë¯¸ì…˜.shop_id = ê°€ê²Œ.id
         JOIN ì§€ì—­   ON ê°€ê²Œ.location_id = ì§€ì—­.id
         JOIN íšŒì›   ON ì§€ì—­.id = íšŒì›.location_id
WHERE íšŒì›.id = 'ë¡œê·¸ì¸í•œ_ì‚¬ìš©ìž_id'
  AND ë¯¸ì…˜.deadline > :deadline 
	OR (ë¯¸ì…˜.deadline = :deadline AND ë¯¸ì…˜.mission_id > :mission_id) 
ORDER BY deadline ASC, mission_id ASC
    LIMIT 10



```